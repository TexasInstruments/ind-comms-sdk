<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<title>EtherCAT Slave: Simple EtherCAT Slave</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
     <tr style="height: 40px;">
         <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg" /></a></td>
         <td id="projectalign"><div id="projectname"> EtherCAT Slave<span id="projectnumber">1.12.02</span></div></td>
         <td id="projectbrief" align="right"><img src=EtherCATLogoIcon.png /></a></td>
         <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
     </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('example1.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Simple EtherCAT Slave </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="example1scope"></a>
Scope</h1>
<p>This example demonstrates the steps to configure the hardware, create the basic EtherCAT Slave information as well as the Object Dictionary and the Process Data configuration.</p>
<h1><a class="anchor" id="section4212"></a>
Related Files</h1>
<p><a href="_ether_c_a_t__slave__simple_8c-example.html" class="_ether_c_a_t__slave__simple_8c-example.html">EtherCAT_Slave_Simple.c</a><br  />
</p>
<h1><a class="anchor" id="section4213"></a>
Basic Setup</h1>
<p>The example starts by initializing operating system (OSAL) and hardware abstraction layers (HWAL). The EtherCAT functionality itself is implemented within the <code>Appl_LoopTask</code> that is started from the <code>main</code> application entry point, both are implemented in <code></code> <a href="_ether_c_a_t__slave__simple_8c-example.html" class="_ether_c_a_t__slave__simple_8c-example.html">EtherCAT_Slave_Simple.c</a>.</p>
<h1><a class="anchor" id="section4215"></a>
Initialization of Stack, PRU, and Example Application</h1>
<p>Before entering the main stack loop, the example application itself is initialized in <code>EC_SLV_APP_applicationInit</code>. This function creates a new EtherCAT Slave device instance, registers a board status LED callback, sets vendor ID, product code and name, revision number, etc.</p>
<table class="image">
<caption>Initialization of the EtherCAT Slave</caption>
<tr>
<td><div class="image">
<img src="EC_SLV_APP_applicationInit.png" alt=""/>
</div>
  </td></tr>
</table>
<h2><a class="anchor" id="subsection42151"></a>
Manufacturer Specific Objects</h2>
<p>Next various objects are created in the Object Dictionary of the EtherCAT Slave device. These objects are used to display information related to the device or used to map them as Process Data. These objects are declared in the Manufacturer Specific Area, whereas the CoE Communication Area objects are created automatically by the SDK.</p>
<p>RXPDO configuration</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <a class="code" href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga18a213a7139e6abfd42411636289a3aa.html#ga18a213a7139e6abfd42411636289a3aa">EC_API_EError_t</a> EC_SLV_APP_populateOutObjects(<a class="code" href="struct_e_c___s_l_v___a_p_p___sapplication.html">EC_SLV_APP_Sapplication_t</a>* pApplicationInstance)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga18a213a7139e6abfd42411636289a3aa.html#ga18a213a7139e6abfd42411636289a3aa">EC_API_EError_t</a>         error   = <a class="code" href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga022716c308f5d5bd84876c11d568a77e.html#gga022716c308f5d5bd84876c11d568a77ea3a185afd519fd0da90c699fc16f1747e">EC_API_eERR_INVALID</a>;</div>
<div class="line">    <a class="code" href="group___e_c___a_p_i___s_l_v___t_y_p_e_s_ga9d1231f70d865a8849936e3a5f4d1cb9.html#ga9d1231f70d865a8849936e3a5f4d1cb9">EC_API_SLV_SHandle_t</a>*   ptSlave;</div>
<div class="line"> </div>
<div class="line">    ...</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create an Object of type RECORD</span></div>
<div class="line">    error = (<a class="code" href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga18a213a7139e6abfd42411636289a3aa.html#ga18a213a7139e6abfd42411636289a3aa">EC_API_EError_t</a>)<a class="code" href="group___e_c___a_p_i___s_l_v___o_b_d_gaf7ec3f42b2830dd02f5863b60abbb9a3.html#gaf7ec3f42b2830dd02f5863b60abbb9a3">EC_API_SLV_CoE_odAddRecord</a>(ptSlave, 0x2000, <span class="stringliteral">&quot;Out Object Record&quot;</span></div>
<div class="line">                                                       ,NULL, NULL, NULL, NULL, &amp;pApplicationInstance-&gt;<a class="code" href="struct_e_c___s_l_v___a_p_p___sapplication_aba41fc93f0752131f99d505a3a629505.html#aba41fc93f0752131f99d505a3a629505">ptRecObjOut</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (error != <a class="code" href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga022716c308f5d5bd84876c11d568a77e.html#gga022716c308f5d5bd84876c11d568a77eaf748c4e7857631705f4832b53534282a">EC_API_eERR_NONE</a>)</div>
<div class="line">    {</div>
<div class="line">        OSAL_printf(<span class="stringliteral">&quot;Object 0x2000 Record Error code: 0x%08x\n&quot;</span>, error);</div>
<div class="line">        <span class="keywordflow">goto</span> Exit;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create a subindex 1 of the RECORD</span></div>
<div class="line">    error = (<a class="code" href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga18a213a7139e6abfd42411636289a3aa.html#ga18a213a7139e6abfd42411636289a3aa">EC_API_EError_t</a>)<a class="code" href="group___e_c___a_p_i___s_l_v___o_b_d_ga57b67e9013576a9952e8bc17c71997bc.html#ga57b67e9013576a9952e8bc17c71997bc">EC_API_SLV_CoE_configRecordSubIndex</a>(ptSlave, pApplicationInstance-&gt;<a class="code" href="struct_e_c___s_l_v___a_p_p___sapplication_aba41fc93f0752131f99d505a3a629505.html#aba41fc93f0752131f99d505a3a629505">ptRecObjOut</a></div>
<div class="line">                                                                ,1, <span class="stringliteral">&quot;SubIndex 1&quot;</span>, <a class="code" href="group___sdo_types_gac820efdf8e8171575cfe8e45c470b817.html#gac820efdf8e8171575cfe8e45c470b817">DEFTYPE_UNSIGNED32</a>, 32</div>
<div class="line">                                                                ,<a class="code" href="group___sdo_access_ga5d66de9562b72809c636b53a85dc48b2.html#ga5d66de9562b72809c636b53a85dc48b2">ACCESS_READWRITE</a> | <a class="code" href="group___sdo_access_gaf2ab04937483e8768daa3fb6a4fa12b6.html#gaf2ab04937483e8768daa3fb6a4fa12b6">OBJACCESS_RXPDOMAPPING</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (error != <a class="code" href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga022716c308f5d5bd84876c11d568a77e.html#gga022716c308f5d5bd84876c11d568a77eaf748c4e7857631705f4832b53534282a">EC_API_eERR_NONE</a>)</div>
<div class="line">    {</div>
<div class="line">        OSAL_printf(<span class="stringliteral">&quot;Object 0x2000 SubIndex 1 Error code: 0x%08x\n&quot;</span>, error);</div>
<div class="line">        <span class="keywordflow">goto</span> Exit;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ...</div>
<div class="line">}</div>
<div class="ttc" id="agroup___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga022716c308f5d5bd84876c11d568a77e_html_gga022716c308f5d5bd84876c11d568a77ea3a185afd519fd0da90c699fc16f1747e"><div class="ttname"><a href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga022716c308f5d5bd84876c11d568a77e.html#gga022716c308f5d5bd84876c11d568a77ea3a185afd519fd0da90c699fc16f1747e">EC_API_eERR_INVALID</a></div><div class="ttdeci">@ EC_API_eERR_INVALID</div><div class="ttdef"><b>Definition:</b> ecSlvApi_Error.h:73</div></div>
<div class="ttc" id="agroup___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga022716c308f5d5bd84876c11d568a77e_html_gga022716c308f5d5bd84876c11d568a77eaf748c4e7857631705f4832b53534282a"><div class="ttname"><a href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga022716c308f5d5bd84876c11d568a77e.html#gga022716c308f5d5bd84876c11d568a77eaf748c4e7857631705f4832b53534282a">EC_API_eERR_NONE</a></div><div class="ttdeci">@ EC_API_eERR_NONE</div><div class="ttdef"><b>Definition:</b> ecSlvApi_Error.h:66</div></div>
<div class="ttc" id="agroup___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga18a213a7139e6abfd42411636289a3aa_html_ga18a213a7139e6abfd42411636289a3aa"><div class="ttname"><a href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga18a213a7139e6abfd42411636289a3aa.html#ga18a213a7139e6abfd42411636289a3aa">EC_API_EError_t</a></div><div class="ttdeci">enum EC_API_EError EC_API_EError_t</div></div>
<div class="ttc" id="agroup___e_c___a_p_i___s_l_v___o_b_d_ga57b67e9013576a9952e8bc17c71997bc_html_ga57b67e9013576a9952e8bc17c71997bc"><div class="ttname"><a href="group___e_c___a_p_i___s_l_v___o_b_d_ga57b67e9013576a9952e8bc17c71997bc.html#ga57b67e9013576a9952e8bc17c71997bc">EC_API_SLV_CoE_configRecordSubIndex</a></div><div class="ttdeci">uint32_t EC_API_SLV_CoE_configRecordSubIndex(EC_API_SLV_SHandle_t *pEcSlaveApi_p, EC_API_SLV_SCoE_Object_t *pObject_p, uint8_t subIndex_p, char *pName_p, uint16_t type_p, uint16_t bitLen_p, uint16_t flags_p)</div><div class="ttdoc">This function creates a subIndex for the Record Object.</div><div class="ttdef"><b>Definition:</b> ecSlvApi_CoEStub.c:867</div></div>
<div class="ttc" id="agroup___e_c___a_p_i___s_l_v___o_b_d_gaf7ec3f42b2830dd02f5863b60abbb9a3_html_gaf7ec3f42b2830dd02f5863b60abbb9a3"><div class="ttname"><a href="group___e_c___a_p_i___s_l_v___o_b_d_gaf7ec3f42b2830dd02f5863b60abbb9a3.html#gaf7ec3f42b2830dd02f5863b60abbb9a3">EC_API_SLV_CoE_odAddRecord</a></div><div class="ttdeci">uint32_t EC_API_SLV_CoE_odAddRecord(EC_API_SLV_SHandle_t *pEcSlaveApi_p, uint16_t index_p, char *pName_p, EC_API_SLV_CBObjRead_t cbRead_p, void *pReadCtxt_p, EC_API_SLV_CBObjWrite_t cbWrite_p, void *pWriteCtxt_p, EC_API_SLV_SCoE_Object_t **pOutSdo_p)</div><div class="ttdoc">This function creates a Record Object.</div><div class="ttdef"><b>Definition:</b> ecSlvApi_CoEStub.c:818</div></div>
<div class="ttc" id="agroup___e_c___a_p_i___s_l_v___t_y_p_e_s_ga9d1231f70d865a8849936e3a5f4d1cb9_html_ga9d1231f70d865a8849936e3a5f4d1cb9"><div class="ttname"><a href="group___e_c___a_p_i___s_l_v___t_y_p_e_s_ga9d1231f70d865a8849936e3a5f4d1cb9.html#ga9d1231f70d865a8849936e3a5f4d1cb9">EC_API_SLV_SHandle_t</a></div><div class="ttdeci">struct EC_API_SLV_SHandle EC_API_SLV_SHandle_t</div><div class="ttdoc">EC_API_SLV_SHandle_t describes the EtherCAT Slave API.</div><div class="ttdef"><b>Definition:</b> ecSlvApi.h:157</div></div>
<div class="ttc" id="agroup___sdo_access_ga5d66de9562b72809c636b53a85dc48b2_html_ga5d66de9562b72809c636b53a85dc48b2"><div class="ttname"><a href="group___sdo_access_ga5d66de9562b72809c636b53a85dc48b2.html#ga5d66de9562b72809c636b53a85dc48b2">ACCESS_READWRITE</a></div><div class="ttdeci">#define ACCESS_READWRITE</div><div class="ttdoc">Read/write in all states.</div><div class="ttdef"><b>Definition:</b> ecSlvApiDef_CoE.h:169</div></div>
<div class="ttc" id="agroup___sdo_access_gaf2ab04937483e8768daa3fb6a4fa12b6_html_gaf2ab04937483e8768daa3fb6a4fa12b6"><div class="ttname"><a href="group___sdo_access_gaf2ab04937483e8768daa3fb6a4fa12b6.html#gaf2ab04937483e8768daa3fb6a4fa12b6">OBJACCESS_RXPDOMAPPING</a></div><div class="ttdeci">#define OBJACCESS_RXPDOMAPPING</div><div class="ttdoc">Mappable in RxPDOs.</div><div class="ttdef"><b>Definition:</b> ecSlvApiDef_CoE.h:179</div></div>
<div class="ttc" id="agroup___sdo_types_gac820efdf8e8171575cfe8e45c470b817_html_gac820efdf8e8171575cfe8e45c470b817"><div class="ttname"><a href="group___sdo_types_gac820efdf8e8171575cfe8e45c470b817.html#gac820efdf8e8171575cfe8e45c470b817">DEFTYPE_UNSIGNED32</a></div><div class="ttdeci">#define DEFTYPE_UNSIGNED32</div><div class="ttdoc">UNSIGNED32.</div><div class="ttdef"><b>Definition:</b> ecSlvApiDef_CoE.h:71</div></div>
<div class="ttc" id="astruct_e_c___s_l_v___a_p_p___sapplication_aba41fc93f0752131f99d505a3a629505_html_aba41fc93f0752131f99d505a3a629505"><div class="ttname"><a href="struct_e_c___s_l_v___a_p_p___sapplication_aba41fc93f0752131f99d505a3a629505.html#aba41fc93f0752131f99d505a3a629505">EC_SLV_APP_Sapplication::ptRecObjOut</a></div><div class="ttdeci">EC_API_SLV_SCoE_Object_t * ptRecObjOut</div><div class="ttdef"><b>Definition:</b> ecSlvSimple.h:87</div></div>
<div class="ttc" id="astruct_e_c___s_l_v___a_p_p___sapplication_html"><div class="ttname"><a href="struct_e_c___s_l_v___a_p_p___sapplication.html">EC_SLV_APP_Sapplication</a></div><div class="ttdef"><b>Definition:</b> ecSlvSimple.h:56</div></div>
</div><!-- fragment --><p>TXPDO configuration</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <a class="code" href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga18a213a7139e6abfd42411636289a3aa.html#ga18a213a7139e6abfd42411636289a3aa">EC_API_EError_t</a> EC_SLV_APP_populateInOutObjects(<a class="code" href="struct_e_c___s_l_v___a_p_p___sapplication.html">EC_SLV_APP_Sapplication_t</a>* pApplicationInstance)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga18a213a7139e6abfd42411636289a3aa.html#ga18a213a7139e6abfd42411636289a3aa">EC_API_EError_t</a>         error   = <a class="code" href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga022716c308f5d5bd84876c11d568a77e.html#gga022716c308f5d5bd84876c11d568a77ea3a185afd519fd0da90c699fc16f1747e">EC_API_eERR_INVALID</a>;</div>
<div class="line">    <a class="code" href="group___e_c___a_p_i___s_l_v___t_y_p_e_s_ga9d1231f70d865a8849936e3a5f4d1cb9.html#ga9d1231f70d865a8849936e3a5f4d1cb9">EC_API_SLV_SHandle_t</a>*   ptSlave;</div>
<div class="line"> </div>
<div class="line">    ...</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create an Object of type RECORD</span></div>
<div class="line">    error = (<a class="code" href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga18a213a7139e6abfd42411636289a3aa.html#ga18a213a7139e6abfd42411636289a3aa">EC_API_EError_t</a>)<a class="code" href="group___e_c___a_p_i___s_l_v___o_b_d_gaf7ec3f42b2830dd02f5863b60abbb9a3.html#gaf7ec3f42b2830dd02f5863b60abbb9a3">EC_API_SLV_CoE_odAddRecord</a>(ptSlave, 0x2002, <span class="stringliteral">&quot;Test Record&quot;</span></div>
<div class="line">                                                       ,NULL, NULL, NULL, NULL</div>
<div class="line">                                                       ,&amp;pApplicationInstance-&gt;<a class="code" href="struct_e_c___s_l_v___a_p_p___sapplication_ad890e227219e7f96be93328c5939522e.html#ad890e227219e7f96be93328c5939522e">pt2002RecObj</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (error != <a class="code" href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga022716c308f5d5bd84876c11d568a77e.html#gga022716c308f5d5bd84876c11d568a77eaf748c4e7857631705f4832b53534282a">EC_API_eERR_NONE</a>)</div>
<div class="line">    {</div>
<div class="line">        OSAL_printf(<span class="stringliteral">&quot;Object Record Error code: 0x%08x\n&quot;</span>, error);</div>
<div class="line">        <span class="keywordflow">goto</span> Exit;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create a subindex 1 of the RECORD</span></div>
<div class="line">    error = (<a class="code" href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga18a213a7139e6abfd42411636289a3aa.html#ga18a213a7139e6abfd42411636289a3aa">EC_API_EError_t</a>)<a class="code" href="group___e_c___a_p_i___s_l_v___o_b_d_ga57b67e9013576a9952e8bc17c71997bc.html#ga57b67e9013576a9952e8bc17c71997bc">EC_API_SLV_CoE_configRecordSubIndex</a>(ptSlave, pApplicationInstance-&gt;<a class="code" href="struct_e_c___s_l_v___a_p_p___sapplication_ad890e227219e7f96be93328c5939522e.html#ad890e227219e7f96be93328c5939522e">pt2002RecObj</a></div>
<div class="line">                                                                ,1, <span class="stringliteral">&quot;SubIndex 1&quot;</span>, <a class="code" href="group___sdo_types_gac820efdf8e8171575cfe8e45c470b817.html#gac820efdf8e8171575cfe8e45c470b817">DEFTYPE_UNSIGNED32</a>, 32</div>
<div class="line">                                                                ,<a class="code" href="group___sdo_access_gabffe9e5de3ddab85a21af380bf0531eb.html#gabffe9e5de3ddab85a21af380bf0531eb">ACCESS_READ</a> | <a class="code" href="group___sdo_access_gac42cc8a75b328e82bce2e4bf8c50fd2f.html#gac42cc8a75b328e82bce2e4bf8c50fd2f">OBJACCESS_TXPDOMAPPING</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (error != <a class="code" href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga022716c308f5d5bd84876c11d568a77e.html#gga022716c308f5d5bd84876c11d568a77eaf748c4e7857631705f4832b53534282a">EC_API_eERR_NONE</a>)</div>
<div class="line">    {</div>
<div class="line">        OSAL_printf(<span class="stringliteral">&quot;Object 0x2002 SubIndex 1 Error code: 0x%08x\n&quot;</span>, error);</div>
<div class="line">        <span class="keywordflow">goto</span> Exit;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ...</div>
<div class="line">}</div>
<div class="ttc" id="agroup___sdo_access_gabffe9e5de3ddab85a21af380bf0531eb_html_gabffe9e5de3ddab85a21af380bf0531eb"><div class="ttname"><a href="group___sdo_access_gabffe9e5de3ddab85a21af380bf0531eb.html#gabffe9e5de3ddab85a21af380bf0531eb">ACCESS_READ</a></div><div class="ttdeci">#define ACCESS_READ</div><div class="ttdoc">Read only in all states.</div><div class="ttdef"><b>Definition:</b> ecSlvApiDef_CoE.h:170</div></div>
<div class="ttc" id="agroup___sdo_access_gac42cc8a75b328e82bce2e4bf8c50fd2f_html_gac42cc8a75b328e82bce2e4bf8c50fd2f"><div class="ttname"><a href="group___sdo_access_gac42cc8a75b328e82bce2e4bf8c50fd2f.html#gac42cc8a75b328e82bce2e4bf8c50fd2f">OBJACCESS_TXPDOMAPPING</a></div><div class="ttdeci">#define OBJACCESS_TXPDOMAPPING</div><div class="ttdoc">Mappable in TxPDOs.</div><div class="ttdef"><b>Definition:</b> ecSlvApiDef_CoE.h:180</div></div>
<div class="ttc" id="astruct_e_c___s_l_v___a_p_p___sapplication_ad890e227219e7f96be93328c5939522e_html_ad890e227219e7f96be93328c5939522e"><div class="ttname"><a href="struct_e_c___s_l_v___a_p_p___sapplication_ad890e227219e7f96be93328c5939522e.html#ad890e227219e7f96be93328c5939522e">EC_SLV_APP_Sapplication::pt2002RecObj</a></div><div class="ttdeci">EC_API_SLV_SCoE_Object_t * pt2002RecObj</div><div class="ttdef"><b>Definition:</b> ecSlvSimple.h:88</div></div>
</div><!-- fragment --><p>Objects <code>0x200C</code> and <code>0x200E</code> are used to demonstrate CoE callback functions. These callbacks, <code>sendEoEFrame</code> and <code>sendEmergencyMsg</code> are deactivated by default in order to pass the EtherCAT Conformance Tests, however, these may be used as write parameter of the stated objects. Using these callback functions, the example application sends an EoE frame or a CoE emergency message with the data written to them. See the code snippet below:</p>
<div class="fragment"><div class="line"><span class="comment">// Create an Object and provide a function to send an emergency message when the object is written</span></div>
<div class="line"> </div>
<div class="line">i32uErr = (EC_API_ERR_T)<a class="code" href="group___e_c___a_p_i___s_l_v___o_b_d_ga893f2eb85de6dcdea45a03fef3b40ae5.html#ga893f2eb85de6dcdea45a03fef3b40ae5">EC_API_SLV_CoE_odAddVariable</a>(ptSlv, 0x200C, <span class="stringliteral">&quot;Emergency message&quot;</span>, <a class="code" href="group___sdo_types_gac820efdf8e8171575cfe8e45c470b817.html#gac820efdf8e8171575cfe8e45c470b817">DEFTYPE_UNSIGNED32</a>, 32, <a class="code" href="group___sdo_access_ga5d66de9562b72809c636b53a85dc48b2.html#ga5d66de9562b72809c636b53a85dc48b2">ACCESS_READWRITE</a>, NULL, &amp;sendEmergencyMsg);</div>
<div class="line"><span class="keywordflow">if</span> (i32uErr != eECERR_NONE)</div>
<div class="line">{</div>
<div class="line">    osal_Printf(<span class="stringliteral">&quot;Object 0x200C Error code: 0x%08x\n&quot;</span>, i32uErr);</div>
<div class="line">    <span class="keywordflow">goto</span> Exit;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Send an EoE message when the Object is written</span></div>
<div class="line"> </div>
<div class="line">i32uErr = (EC_API_ERR_T)<a class="code" href="group___e_c___a_p_i___s_l_v___o_b_d_ga893f2eb85de6dcdea45a03fef3b40ae5.html#ga893f2eb85de6dcdea45a03fef3b40ae5">EC_API_SLV_CoE_odAddVariable</a>(ptSlv, 0x200E, <span class="stringliteral">&quot;EoE Send Frame&quot;</span>, <a class="code" href="group___sdo_types_gac820efdf8e8171575cfe8e45c470b817.html#gac820efdf8e8171575cfe8e45c470b817">DEFTYPE_UNSIGNED32</a>, 32, <a class="code" href="group___sdo_access_ga5d66de9562b72809c636b53a85dc48b2.html#ga5d66de9562b72809c636b53a85dc48b2">ACCESS_READWRITE</a>, NULL, &amp;sendEoEFrame);</div>
<div class="line"><span class="keywordflow">if</span> (i32uErr != eECERR_NONE)</div>
<div class="line">{</div>
<div class="line">    osal_Printf(<span class="stringliteral">&quot;Object 0x200E Error code: 0x%08x\n&quot;</span>, i32uErr);</div>
<div class="line">    <span class="keywordflow">goto</span> Exit;</div>
<div class="line">}</div>
<div class="ttc" id="agroup___e_c___a_p_i___s_l_v___o_b_d_ga893f2eb85de6dcdea45a03fef3b40ae5_html_ga893f2eb85de6dcdea45a03fef3b40ae5"><div class="ttname"><a href="group___e_c___a_p_i___s_l_v___o_b_d_ga893f2eb85de6dcdea45a03fef3b40ae5.html#ga893f2eb85de6dcdea45a03fef3b40ae5">EC_API_SLV_CoE_odAddVariable</a></div><div class="ttdeci">uint32_t EC_API_SLV_CoE_odAddVariable(EC_API_SLV_SHandle_t *pEcSlaveApi_p, uint16_t index_p, char *pName_p, uint16_t type_p, uint16_t bitLen_p, uint16_t flags_p, EC_API_SLV_CBObjRead_t cbRead_p, void *pReadCtxt_p, EC_API_SLV_CBObjWrite_t cbWrite_p, void *pWriteCtxt_p)</div><div class="ttdoc">This function creates a Base Data Type Object for the Object Dictionary.</div><div class="ttdef"><b>Definition:</b> ecSlvApi_CoEStub.c:711</div></div>
</div><!-- fragment --><h2><a class="anchor" id="subsection42152"></a>
Process Data Object Configuration</h2>
<p>Once the Object Dictionary is configured, Process Data are defined. The function <code><a class="el" href="group___e_c___s_l_v___a_p_p_gac82d9fab78e55afb83682f45f3c24c00.html#gac82d9fab78e55afb83682f45f3c24c00" title="Configure RX PDO entries.">EC_SLV_APP_populateRxPDO()</a></code> is used to generate the output PDOs and <code><a class="el" href="group___e_c___s_l_v___a_p_p_ga8a280a28d8d9ac31c380ccf5695a6f6a.html#ga8a280a28d8d9ac31c380ccf5695a6f6a" title="Configure TX PDO entries.">EC_SLV_APP_populateTxPDO()</a></code> to generate the input PDOs. By default, the SDK sets the PDO assignment fixed, meaning that a PDO generated by the application is attached to a SyncManager and this configuration cannot be changed. However, it allows by default to modify the PDO entry content. To change these behaviours refer to <code>EC_API_SLV_PDO_setFixedMapping()</code> and <code><a class="el" href="group___e_c___a_p_i___s_l_v___p_d_o_ga7a7e3c11e909829298bc2652d0df3836.html#ga7a7e3c11e909829298bc2652d0df3836" title="Enable or disable PDO assignments of the SyncManagers. Download of PDO assignment (e....">EC_API_SLV_PDO_setAssignment()</a></code> functions.</p>
<h2><a class="anchor" id="subsection42154"></a>
Initialization and starting the Stacks</h2>
<p>The <code><a class="el" href="group___e_c___a_p_i___s_l_v___b_a_s_i_c_ga5835de86b796042d04c50bc60f48cc60.html#ga5835de86b796042d04c50bc60f48cc60" title="This is the function to initialize the EtherCAT Slave API.">EC_API_SLV_init()</a></code> function initializes the SDK Stack and validates whether the user defined configuration is valid or not. If the EtherCAT configuration is valid, then object content can be written and finally, the <code><a class="el" href="group___e_c___a_p_i___s_l_v___b_a_s_i_c_gae8fd647dd229ca8feb5dcc0e65ba2104.html#gae8fd647dd229ca8feb5dcc0e65ba2104" title="This is the function to run the EtherCAT Slave API.">EC_API_SLV_run()</a></code> function starts the Beckhoff Stack. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
