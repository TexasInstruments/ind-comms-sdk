<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<title>EtherCAT Slave: Process data memory access</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
     <tr style="height: 40px;">
         <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg" /></a></td>
         <td id="projectalign"><div id="projectname"> EtherCAT Slave<span id="projectnumber">1.12.02</span></div></td>
         <td id="projectbrief" align="right"><img src=EtherCATLogoIcon.png /></a></td>
         <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
     </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('proc_data_mem_access.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Process data memory access </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This chapter provides guidance to the developers who want to optimize the access to the process data. The SDK uses by default the process data buffers provided by the Beckhoff Stack if none is provided. The PDO setter and getter functions listed in the PDO <a class="el" href="proc_data_config.html#faqPdHelp">Help functions</a> copy the process data from one memory area to another. Those functions have time and performance costs, therefore, the SDK allows to register callbacks to access the customer specific memory areas and enable <em>zero copy</em> behaviour.</p>
<p>The SDK API provides the customer the following API:</p>
<table class="doxtable">
<tr>
<th>Function </th><th>Description  </th></tr>
<tr>
<td><a class="el" href="group___e_c___a_p_i___s_l_v___b_u_f_f_e_r_ga0ea4e23cfbca9ad74b75658e35b87a38.html#ga0ea4e23cfbca9ad74b75658e35b87a38">EC_API_SLV_cbRegisterPreSeqInputPDBuffer</a> </td><td>Request a buffer to read input process data  </td></tr>
<tr>
<td><a class="el" href="group___e_c___a_p_i___s_l_v___b_u_f_f_e_r_gaf1f8e6bcd921636ebd568618ddae9581.html#gaf1f8e6bcd921636ebd568618ddae9581">EC_API_SLV_cbRegisterPreSeqOutputPDBuffer</a> </td><td>Request a buffer to write output process data  </td></tr>
<tr>
<td><a class="el" href="group___e_c___a_p_i___s_l_v___b_u_f_f_e_r_ga18d8de62490ea4189b9f3851bf6c9091.html#ga18d8de62490ea4189b9f3851bf6c9091">EC_API_SLV_cbRegisterPostSeqInputPDBuffer</a> </td><td>Triggered after input process data has been read  </td></tr>
<tr>
<td><a class="el" href="group___e_c___a_p_i___s_l_v___b_u_f_f_e_r_ga2fcdaf88f9c08aa3034b69854c517676.html#ga2fcdaf88f9c08aa3034b69854c517676">EC_API_SLV_cbRegisterPostSeqOutputPDBuffer</a> </td><td>Triggered after input process data has been written  </td></tr>
</table>
<p>Using these functions, the end user can register its own callbacks and handle the process data on its own will. For instance, the customer can implement a triple buffer mechanism in a Dual Port RAM and the SDK will get and set the data from it.</p>
<div class="fragment"><div class="line"><a class="code" href="group___e_c___a_p_i___s_l_v___t_y_p_e_s_ga9d1231f70d865a8849936e3a5f4d1cb9.html#ga9d1231f70d865a8849936e3a5f4d1cb9">EC_API_SLV_SHandle_t</a>*   ptSlave = pApplicationInstance_p-&gt;ptEcSlvApi;</div>
<div class="line"> </div>
<div class="line"><a class="code" href="group___e_c___a_p_i___s_l_v___b_u_f_f_e_r_ga0ea4e23cfbca9ad74b75658e35b87a38.html#ga0ea4e23cfbca9ad74b75658e35b87a38">EC_API_SLV_cbRegisterPreSeqInputPDBuffer</a>    (ptSlave, ptSlave, DPR_PreSequenceInputProcessData);</div>
<div class="line"><a class="code" href="group___e_c___a_p_i___s_l_v___b_u_f_f_e_r_gaf1f8e6bcd921636ebd568618ddae9581.html#gaf1f8e6bcd921636ebd568618ddae9581">EC_API_SLV_cbRegisterPreSeqOutputPDBuffer</a>   (ptSlave, ptSlave, DPR_PreSequenceOutputProcessData);</div>
<div class="line"><a class="code" href="group___e_c___a_p_i___s_l_v___b_u_f_f_e_r_ga18d8de62490ea4189b9f3851bf6c9091.html#ga18d8de62490ea4189b9f3851bf6c9091">EC_API_SLV_cbRegisterPostSeqInputPDBuffer</a>   (ptSlave, ptSlave, DPR_PostSequenceInputProcessData);</div>
<div class="line"><a class="code" href="group___e_c___a_p_i___s_l_v___b_u_f_f_e_r_ga2fcdaf88f9c08aa3034b69854c517676.html#ga2fcdaf88f9c08aa3034b69854c517676">EC_API_SLV_cbRegisterPostSeqOutputPDBuffer</a>  (ptSlave, ptSlave, DPR_PostSequenceOutputProcessData);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Slave to Master COMM (TXPDO)</span></div>
<div class="line"><span class="keywordtype">void</span>* DPR_PreSequenceInputProcessData(<span class="keywordtype">void</span>* pContext_p, uint32_t i32uLength_p)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">void</span>* pvPayload = NULL;</div>
<div class="line">    <span class="comment">// Get latest processdata of application from DPR to send to the Master.</span></div>
<div class="line">    pvPayload = (<span class="keywordtype">void</span>*) DPR_getBuffer(DPR_eService_GetInputProcessData, i32uLength_p);</div>
<div class="line">    <span class="keywordflow">return</span> pvPayload;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Master to Slave COMM (RXPDO)</span></div>
<div class="line"><span class="keywordtype">void</span>* DPR_PreSequenceOutputProcessData(<span class="keywordtype">void</span>* pContext_p, uint32_t i32uLength_p)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">void</span>* pvPayload = NULL;</div>
<div class="line">    <span class="comment">//Get dirty buffer to write the process data received from the Master.</span></div>
<div class="line">    pvPayload = (<span class="keywordtype">void</span>*) DPR_getBuffer(DPR_eService_SetOutputProcessData, i32uLength_p);</div>
<div class="line">    <span class="keywordflow">return</span> pvPayload;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Slave to Master COMM (TXPDO)</span></div>
<div class="line"><span class="keywordtype">void</span> DPR_PostSequenceInputProcessData(<span class="keywordtype">void</span>* pContext_p, <span class="keywordtype">void</span>* pvBuffer_p, uint32_t i32uLength_p)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">//Buffer has been read. Nothing to do.</span></div>
<div class="line">    DPR_setBuffer(DPR_eService_GetInputProcessData, pvBuffer_p, i32uLength_p);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Master to Slave COMM (RXPDO)</span></div>
<div class="line"><span class="keywordtype">void</span> DPR_PostSequenceOutputProcessData(<span class="keywordtype">void</span>* pContext_p, <span class="keywordtype">void</span>* pvBuffer_p, uint32_t i32uLength_p)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">//Buffer has been written. Flip the dirty buffer with the latest buffer.</span></div>
<div class="line">    DPR_setBuffer(DPR_eService_SetOutputProcessData, pvBuffer_p, i32uLength_p);</div>
<div class="line">}</div>
<div class="ttc" id="agroup___e_c___a_p_i___s_l_v___b_u_f_f_e_r_ga0ea4e23cfbca9ad74b75658e35b87a38_html_ga0ea4e23cfbca9ad74b75658e35b87a38"><div class="ttname"><a href="group___e_c___a_p_i___s_l_v___b_u_f_f_e_r_ga0ea4e23cfbca9ad74b75658e35b87a38.html#ga0ea4e23cfbca9ad74b75658e35b87a38">EC_API_SLV_cbRegisterPreSeqInputPDBuffer</a></div><div class="ttdeci">void EC_API_SLV_cbRegisterPreSeqInputPDBuffer(EC_API_SLV_SHandle_t *pEcSlaveApi_p, void *pContext_p, EC_API_SLV_CBPreSeqInputPD_t cbFunc_p)</div><div class="ttdoc">This is the function to register a function which gets an external Process data buffer.</div><div class="ttdef"><b>Definition:</b> ecSlvApi_ProcDataStub.c:1107</div></div>
<div class="ttc" id="agroup___e_c___a_p_i___s_l_v___b_u_f_f_e_r_ga18d8de62490ea4189b9f3851bf6c9091_html_ga18d8de62490ea4189b9f3851bf6c9091"><div class="ttname"><a href="group___e_c___a_p_i___s_l_v___b_u_f_f_e_r_ga18d8de62490ea4189b9f3851bf6c9091.html#ga18d8de62490ea4189b9f3851bf6c9091">EC_API_SLV_cbRegisterPostSeqInputPDBuffer</a></div><div class="ttdeci">void EC_API_SLV_cbRegisterPostSeqInputPDBuffer(EC_API_SLV_SHandle_t *pEcSlaveApi_p, void *pContext_p, EC_API_SLV_CBPostSeqInputPD_t cbFunc_p)</div><div class="ttdoc">This is the function to register a function which releases an external Process data buffer.</div><div class="ttdef"><b>Definition:</b> ecSlvApi_ProcDataStub.c:1185</div></div>
<div class="ttc" id="agroup___e_c___a_p_i___s_l_v___b_u_f_f_e_r_ga2fcdaf88f9c08aa3034b69854c517676_html_ga2fcdaf88f9c08aa3034b69854c517676"><div class="ttname"><a href="group___e_c___a_p_i___s_l_v___b_u_f_f_e_r_ga2fcdaf88f9c08aa3034b69854c517676.html#ga2fcdaf88f9c08aa3034b69854c517676">EC_API_SLV_cbRegisterPostSeqOutputPDBuffer</a></div><div class="ttdeci">void EC_API_SLV_cbRegisterPostSeqOutputPDBuffer(EC_API_SLV_SHandle_t *pEcSlaveApi_p, void *pContext_p, EC_API_SLV_CBPostSeqOutputPD_t cbFunc_p)</div><div class="ttdoc">This is the function to register a function which releases an external Process data buffer.</div><div class="ttdef"><b>Definition:</b> ecSlvApi_ProcDataStub.c:1224</div></div>
<div class="ttc" id="agroup___e_c___a_p_i___s_l_v___b_u_f_f_e_r_gaf1f8e6bcd921636ebd568618ddae9581_html_gaf1f8e6bcd921636ebd568618ddae9581"><div class="ttname"><a href="group___e_c___a_p_i___s_l_v___b_u_f_f_e_r_gaf1f8e6bcd921636ebd568618ddae9581.html#gaf1f8e6bcd921636ebd568618ddae9581">EC_API_SLV_cbRegisterPreSeqOutputPDBuffer</a></div><div class="ttdeci">void EC_API_SLV_cbRegisterPreSeqOutputPDBuffer(EC_API_SLV_SHandle_t *pEcSlaveApi_p, void *pContext_p, EC_API_SLV_CBPreSeqOutputPD_t cbFunc_p)</div><div class="ttdoc">This is the function to register a function which gets an external Process data buffer.</div><div class="ttdef"><b>Definition:</b> ecSlvApi_ProcDataStub.c:1146</div></div>
<div class="ttc" id="agroup___e_c___a_p_i___s_l_v___t_y_p_e_s_ga9d1231f70d865a8849936e3a5f4d1cb9_html_ga9d1231f70d865a8849936e3a5f4d1cb9"><div class="ttname"><a href="group___e_c___a_p_i___s_l_v___t_y_p_e_s_ga9d1231f70d865a8849936e3a5f4d1cb9.html#ga9d1231f70d865a8849936e3a5f4d1cb9">EC_API_SLV_SHandle_t</a></div><div class="ttdeci">struct EC_API_SLV_SHandle EC_API_SLV_SHandle_t</div><div class="ttdoc">EC_API_SLV_SHandle_t describes the EtherCAT Slave API.</div><div class="ttdef"><b>Definition:</b> ecSlvApi.h:157</div></div>
</div><!-- fragment --><p><br  />
 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
