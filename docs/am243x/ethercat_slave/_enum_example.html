<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<title>EtherCAT Slave: Enumerations in Object Dictionary</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
     <tr style="height: 40px;">
         <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg" /></a></td>
         <td id="projectalign"><div id="projectname"> EtherCAT Slave<span id="projectnumber"></span></div></td>
         <td id="projectbrief" align="right"><img src=EtherCATLogoIcon.png /></a></td>
         <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
     </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('_enum_example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Enumerations in Object Dictionary</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Enumeration types can be defined in the Object Dictionary and these are hidden in the index range between 0x0800 and 0x0FFF. Enumeration type entries are composed by a value and by a name. Moreover, the enum bit size has to be provided. To create and configure the enumeration, these API functions are available: EC_API_SLV_CoE_odAddEnum and EC_API_SLV_CoE_configEnum.</p>
<h1><a class="anchor" id="EnumCreateAndConfig"></a>
Create and configure the new ENUM type</h1>
<p>Use the function EC_API_SLV_CoE_odAddEnum to create the enum object. As input parameter it requires the SDK handle and the enumeration index. The index must be between 0x0800 and 0x0FFF, otherwise it will return an error code. The output parameter in an OBD object.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define SLS_OBJIDX_FSOE_CONN_STATE      0x0800</span></div>
<div class="line"> </div>
<div class="line"> <span class="comment">//Create ENUM object</span></div>
<div class="line"> error = (<a class="code hl_typedef" href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga18a213a7139e6abfd42411636289a3aa.html#ga18a213a7139e6abfd42411636289a3aa">EC_API_EError_t</a>) EC_API_SLV_CoE_odAddEnum(ptSlave, SLS_OBJIDX_FSOE_CONN_STATE, &amp;pApplicationInstance-&gt;pt0800EnumObj);</div>
<div class="line"> <span class="keywordflow">if</span> (error != <a class="code hl_enumvalue" href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga022716c308f5d5bd84876c11d568a77e.html#gga022716c308f5d5bd84876c11d568a77eaf748c4e7857631705f4832b53534282a">EC_API_eERR_NONE</a>)</div>
<div class="line"> {</div>
<div class="line">     OSAL_printf(<span class="stringliteral">&quot;Object SLS_OBJIDX_FSOE_CONN_STATE Error code: 0x%08x\r\n&quot;</span>, error);</div>
<div class="line"> }</div>
<div class="ttc" id="agroup___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga022716c308f5d5bd84876c11d568a77e_html_gga022716c308f5d5bd84876c11d568a77eaf748c4e7857631705f4832b53534282a"><div class="ttname"><a href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga022716c308f5d5bd84876c11d568a77e.html#gga022716c308f5d5bd84876c11d568a77eaf748c4e7857631705f4832b53534282a">EC_API_eERR_NONE</a></div><div class="ttdeci">@ EC_API_eERR_NONE</div><div class="ttdef"><b>Definition</b> ecSlvApiDef_error.h:41</div></div>
<div class="ttc" id="agroup___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga18a213a7139e6abfd42411636289a3aa_html_ga18a213a7139e6abfd42411636289a3aa"><div class="ttname"><a href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga18a213a7139e6abfd42411636289a3aa.html#ga18a213a7139e6abfd42411636289a3aa">EC_API_EError_t</a></div><div class="ttdeci">enum EC_API_EError EC_API_EError_t</div></div>
</div><!-- fragment --><p>Use the function EC_API_SLV_CoE_configEnum to configure each enum entry. As input parameters, it requires the SDK handle, the enumeration object and then the entry value and entry name.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define FSOE_CONN_ST_RESET              100</span></div>
<div class="line"><span class="preprocessor">#define FSOE_CONN_ST_SESSION            101</span></div>
<div class="line"><span class="preprocessor">#define FSOE_CONN_ST_CONNECTION         102</span></div>
<div class="line"><span class="preprocessor">#define FSOE_CONN_ST_PARAMETER          103</span></div>
<div class="line"><span class="preprocessor">#define FSOE_CONN_ST_DATA               104</span></div>
<div class="line"><span class="preprocessor">#define FSOE_CONN_ST_FAILSAFE           105</span></div>
<div class="line"> </div>
<div class="line">EC_API_SLV_CoE_configEnum(ptSlave, pApplicationInstance-&gt;pt0800EnumObj, FSOE_CONN_ST_RESET, <span class="stringliteral">&quot;Reset&quot;</span>);</div>
<div class="line">EC_API_SLV_CoE_configEnum(ptSlave, pApplicationInstance-&gt;pt0800EnumObj, FSOE_CONN_ST_SESSION, <span class="stringliteral">&quot;Session&quot;</span>);</div>
<div class="line">EC_API_SLV_CoE_configEnum(ptSlave, pApplicationInstance-&gt;pt0800EnumObj, FSOE_CONN_ST_CONNECTION, <span class="stringliteral">&quot;Connection&quot;</span>);</div>
<div class="line">EC_API_SLV_CoE_configEnum(ptSlave, pApplicationInstance-&gt;pt0800EnumObj, FSOE_CONN_ST_PARAMETER, <span class="stringliteral">&quot;Parameter&quot;</span>);</div>
<div class="line">EC_API_SLV_CoE_configEnum(ptSlave, pApplicationInstance-&gt;pt0800EnumObj, FSOE_CONN_ST_DATA, <span class="stringliteral">&quot;Data&quot;</span>);</div>
<div class="line">EC_API_SLV_CoE_configEnum(ptSlave, pApplicationInstance-&gt;pt0800EnumObj, FSOE_CONN_ST_FAILSAFE, <span class="stringliteral">&quot;FailSafe&quot;</span>);</div>
</div><!-- fragment --><h1><a class="anchor" id="EnumUsingWithApi"></a>
Using the new ENUM type</h1>
<p>The new enumeration type can now be used as type parameter for variable, array and record objects. Provide the enumeration index as type parameter and specify the enumeration bit length. The enumeration size can be up to 32 bits.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define SLS_OBJIDX_FSOE_DIG_IO_MODULE   0xA000</span></div>
<div class="line"><span class="preprocessor">#define SLS_OBJIDX_FSOE_CONN_STATE      0x0800</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//Create FSoE Diagnosis object</span></div>
<div class="line">error = (<a class="code hl_typedef" href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga18a213a7139e6abfd42411636289a3aa.html#ga18a213a7139e6abfd42411636289a3aa">EC_API_EError_t</a>)EC_API_SLV_CoE_odAddRecord(ptSlave,</div>
<div class="line">                                                    SLS_OBJIDX_FSOE_DIG_IO_MODULE,</div>
<div class="line">                                                    <span class="stringliteral">&quot;FSoE Digital IO Module&quot;</span>,</div>
<div class="line">                                                    NULL,</div>
<div class="line">                                                    NULL,</div>
<div class="line">                                                    NULL,</div>
<div class="line">                                                    NULL,</div>
<div class="line">                                                    &amp;pApplicationInstance-&gt;ptA000RecObj);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Configure new SubIndex as enumeration type SLS_OBJIDX_FSOE_CONN_STATE and 16 bit length</span></div>
<div class="line">error = (<a class="code hl_typedef" href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga18a213a7139e6abfd42411636289a3aa.html#ga18a213a7139e6abfd42411636289a3aa">EC_API_EError_t</a>)EC_API_SLV_CoE_configRecordSubIndex(ptSlave,</div>
<div class="line">                                                             pApplicationInstance-&gt;ptA000RecObj,</div>
<div class="line">                                                             1,</div>
<div class="line">                                                             <span class="stringliteral">&quot;Connection State&quot;</span>,</div>
<div class="line">                                                             SLS_OBJIDX_FSOE_CONN_STATE,</div>
<div class="line">                                                             16,</div>
<div class="line">                                                             <a class="code hl_define" href="group___sdo_access_gabffe9e5de3ddab85a21af380bf0531eb.html#gabffe9e5de3ddab85a21af380bf0531eb">ACCESS_READ</a>);</div>
<div class="line"><span class="keywordflow">if</span> (error != <a class="code hl_enumvalue" href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga022716c308f5d5bd84876c11d568a77e.html#gga022716c308f5d5bd84876c11d568a77eaf748c4e7857631705f4832b53534282a">EC_API_eERR_NONE</a>)</div>
<div class="line">{</div>
<div class="line">    OSAL_printf(<span class="stringliteral">&quot;Object 0xA000 SubIndex 1 Error code: 0x%08x\r\n&quot;</span>, error);</div>
<div class="line">    <span class="keywordflow">goto</span> Exit;</div>
<div class="line">}</div>
<div class="ttc" id="agroup___sdo_access_gabffe9e5de3ddab85a21af380bf0531eb_html_gabffe9e5de3ddab85a21af380bf0531eb"><div class="ttname"><a href="group___sdo_access_gabffe9e5de3ddab85a21af380bf0531eb.html#gabffe9e5de3ddab85a21af380bf0531eb">ACCESS_READ</a></div><div class="ttdeci">#define ACCESS_READ</div><div class="ttdoc">Read only in all states.</div><div class="ttdef"><b>Definition</b> ecSlvApiDef_CoE.h:135</div></div>
</div><!-- fragment --><p>Finally set a value after initializing the stack with the EC_API_SLV_init.</p>
<div class="fragment"><div class="line"><span class="comment">/* use this code snippet after EC_API_SLV_init */</span></div>
<div class="line">uint16_t connectionState = FSOE_CONN_ST_RESET;</div>
<div class="line">EC_API_SLV_CoE_getObjectEntryByObject(ptSlave, pApplicationInstance_p-&gt;ptA000RecObj, 1, &amp;ptObjEntry);</div>
<div class="line">error = (<a class="code hl_typedef" href="group___e_c___a_p_i___s_l_v___e_r_r_o_r___c_o_d_e_s_ga18a213a7139e6abfd42411636289a3aa.html#ga18a213a7139e6abfd42411636289a3aa">EC_API_EError_t</a>)EC_API_SLV_CoE_setObjectEntryData(ptSlave, ptObjEntry, <span class="keyword">sizeof</span>(uint16_t), &amp;connectionState);</div>
</div><!-- fragment --><h1><a class="anchor" id="EnumInTwinCAT"></a>
Enumeration in TwinCAT</h1>
<p>The enumeration subIndex can now be accessed by TwinCAT.</p>
<div class="image">
<img src="enum_obd1.png" alt=""/>
<div class="caption">
A000 object with subIndex 1 of enumeration type</div></div>
    <p>The data dialog window shows a box with all possible enumeration values.</p>
<div class="image">
<img src="enum_obd2.png" alt=""/>
<div class="caption">
Enumeration box in TwinCAT</div></div>
     </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
