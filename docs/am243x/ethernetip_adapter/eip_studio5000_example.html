<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<title>EtherNet/IP™ Adapter: Studio 5000 Logix Designer with Allen-Bradley CompactLogix Controller</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="ReleaseNotes.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
     <tr style="height: 40px;">
         <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg" /></a></td>
         <td id="projectalign"><div id="projectname"> EtherNet/IP™ Adapter<span id="projectnumber">3.06.02</span></div></td>
         <td id="projectbrief" align="right"><img src=EtherNetIP.png /></a></td>
         <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
     </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('eip_studio5000_example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Studio 5000 Logix Designer with Allen-Bradley CompactLogix Controller</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#quickstart_example_plc_studio5000_device_installation">Studio 5000 and Device Description Installation</a><ul><li class="level2"><a href="#page_quickstart_allen_bradley_stud5000_eds">Adding an EDS File</a></li>
</ul>
</li>
<li class="level1"><a href="#page_quickstart_allen_bradley_stud5000_structure">Example Structure</a></li>
<li class="level1"><a href="#page_quickstart_allen_bradley_studio5000_running">Running the Example on PLC</a><ul><li class="level2"><a href="#page_quickstart_allen_bradley_studio5000_download">Download the Example to the PLC</a></li>
<li class="level2"><a href="#page_quickstart_allen_bradley_studio5000_online">Getting Online with The PLC</a></li>
<li class="level2"><a href="#page_quickstart_allen_bradley_studio5000_tags">Monitoring changes through Controller Tags</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>The example is prepared to run on an <b>Allen-Bradley CompactLogix 5370 controller</b> communicating with an EtherNet/IP Adapter implementing a <b>General Purpose Discrete I/O Device</b> profile running on a Texas Instruments <a href="https://www.ti.com/tool/LP-AM243">LP-AM243 LaunchPad&trade;</a> development kit.</p>
<p>Both Explicit and Implicit messaging are demonstrated in the example.</p>
<h1><a class="anchor" id="quickstart_example_plc_studio5000_device_installation"></a>
Studio 5000 and Device Description Installation</h1>
<p>Allen-Bradley CompactLogix 5370, model 1769-L16ER, controller is programmed using Studio 5000 development environment.</p>
<h2><a class="anchor" id="page_quickstart_allen_bradley_stud5000_eds"></a>
Adding an EDS File</h2>
<p>To add a different EDS file that is not listed in the known EDS files click on "Tools &rarr; EDS Hardware Installation Tool". You need to do that if you are using EVM board instead of Launchpad becasue the EDS of Launchpad is already in the structure of this example.</p>
<h1><a class="anchor" id="page_quickstart_allen_bradley_stud5000_structure"></a>
Example Structure</h1>
<p>The project is created in Structured Text and divided into three routines that are run from the main routine and triggerred by a timer every 3 seconds.</p>
<div class="fragment"><div class="line">TONR(FbdTimer1);</div>
<div class="line">FbdTimer1.PRE := 3000;</div>
<div class="line">FbdTimer1.TimerEnable := NOT FbdTimer1.DN;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> FbdTimer1.DN then</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Get Attribute Single requests per 3 secs</span></div>
<div class="line">    JSR(ImplicitMsg_Discrete_IO_Device);</div>
<div class="line">    JSR(ExplicitMsg_Discrete_IO_Device);</div>
<div class="line">            </div>
<div class="line">end_if;</div>
</div><!-- fragment --><p>The subroutines are: </p><dl>
<dt>ExplicitMsg_with_DTK </dt>
<dd>Sends explicit messages for Identity and TCP/IP objects as well as the Discrete Output Point (Class ID = 0x09) Object's first instance. </dd>
</dl>
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">Routine with a CIP Explicit Messaging example for the</span></div>
<div class="line"><span class="comment">EtherNet/IP General Purpose Discrete I/O Device</span></div>
<div class="line"><span class="comment">on a Texas Instruments LP-AM243 Launchpad</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">case</span> LocalCounter2 of</div>
<div class="line">    0:  <span class="comment">// Identity Object&#39;s (0x01), Vendor ID Attribute (0x01)</span></div>
<div class="line">        GetAttrSingle_Discrete_IO_Device.Class := 16#01;</div>
<div class="line">        GetAttrSingle_Discrete_IO_Device.Attribute := 16#01;</div>
<div class="line">        GetAttrSingle_Discrete_IO_Device.Instance := 16#01;</div>
<div class="line">    1:  <span class="comment">// Identity Object&#39;s (0x01), Serial Number Attribute (0x06)     </span></div>
<div class="line">        GetAttrSingle_Discrete_IO_Device.Class := 16#01;</div>
<div class="line">        GetAttrSingle_Discrete_IO_Device.Attribute := 16#06;</div>
<div class="line">        GetAttrSingle_Discrete_IO_Device.Instance := 16#01;</div>
<div class="line">    2:  <span class="comment">// TCP/IP Object&#39;s (0xF5), Configuration Capability Attribute (0x02)</span></div>
<div class="line">        GetAttrSingle_Discrete_IO_Device.Class := 16#F5;</div>
<div class="line">        GetAttrSingle_Discrete_IO_Device.Attribute := 16#02;</div>
<div class="line">        GetAttrSingle_Discrete_IO_Device.Instance := 16#01; </div>
<div class="line">end_case;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Counters</span></div>
<div class="line"><span class="keywordflow">if</span> LocalCounter2 &lt; 2 then</div>
<div class="line">    LocalCounter2 := LocalCounter + 1;</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">    LocalCounter2 := 0;</div>
<div class="line">end_if;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Message sending</span></div>
<div class="line">MSG(GetAttrSingle_Discrete_IO_Device);</div>
</div><!-- fragment --><p><img src="allen_bradley_explicit_messaging.png" alt="" width="600px" height="auto" border="1" class="inline"/></p>
<dl>
<dt>ImplicitMsg_with_DTK </dt>
<dd>Sends implicit messages to Configuration Assembly to set the mode (ENABLED/DISABLED) of Discrete Output Object I/O communication. </dd>
</dl>
<p>This example checks the two bytes of the Configuration Assembly and sets the Output Assemblies represented as two instances of Discrete Output Object. The results can be read on Input Assemblies represented as two instances of Discrete Input Object.</p>
<p>If the first byte of Configuration Assembly is set to "0" Discrete Output Point Object's first instance will be disabled for the I/O messaging. If it is set to "1" I/O communication for that instance will be enabled and changes on Output Assembly can be seen both on Input Assembly and LED on the board.</p>
<p>The example below shows that Configuration Assemblies set to "1" and enabled for both of the Discrete Output Point Object's instances. Industrial LEDs (LD 15 &amp; LD 14) controlled by the TPIC2810 8-bit I2C LED driver will be toggled.</p>
<div class="fragment"><div class="line">Discrete_IO_Device:C.Output6:= 16#01;</div>
<div class="line">Discrete_IO_Device:C.Output7:= 16#01;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> LedStatus2 then</div>
<div class="line">    Discrete_IO_Device:O.Data[0]:= 16#00;</div>
<div class="line">    Discrete_IO_Device:O.Data[1]:= 16#00;</div>
<div class="line">    LedStatus2:=0;</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">    Discrete_IO_Device:O.Data[0]:= 16#01;</div>
<div class="line">    Discrete_IO_Device:O.Data[1]:= 16#01;</div>
<div class="line">    LedStatus2:=1;</div>
<div class="line">end_if;</div>
</div><!-- fragment --><p><img src="allen_bradley_implicit_messaging.png" alt="" width="600px" height="auto" border="1" class="inline"/></p>
<h1><a class="anchor" id="page_quickstart_allen_bradley_studio5000_running"></a>
Running the Example on PLC</h1>
<h2><a class="anchor" id="page_quickstart_allen_bradley_studio5000_download"></a>
Download the Example to the PLC</h2>
<p>Verify the the hardware swith on the PLC (RUN/REM/PROG) is set into REM position. To download the example to the PLC, from dropdown menu click "Download". </p>
<p><img src="allen_bradley_download.png" alt="" width="600px" height="auto" border="1" class="inline"/></p>
<h2><a class="anchor" id="page_quickstart_allen_bradley_studio5000_online"></a>
Getting Online with The PLC</h2>
<p>After downloading if you are not automatically prompted to move to "Rem Run", from the dropdown menu click "Run Mode". </p>
<p><img src="allen_bradley_run.png" alt="" width="600px" height="auto" border="1" class="inline"/></p>
<h2><a class="anchor" id="page_quickstart_allen_bradley_studio5000_tags"></a>
Monitoring changes through Controller Tags</h2>
<p>When online, you can observe these Implicit messages changes from Controller Tags on the left menu bar. In this example we can specifically observe "DTK_Discrete:O.Data[0]" &amp; "DTK_Discrete:O.Data[1]" and "DTK_Discrete:I.Data[0]" &amp; "DTK_Discrete:I.Data[1]" changing. </p>
<p><img src="allen_bradley_tags.png" alt="" width="600px" height="auto" border="1" class="inline"/></p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
