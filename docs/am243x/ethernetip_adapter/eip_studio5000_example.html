<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<title>EtherNet/IP™ Adapter: Allen-Bradley CompactLogix Controller</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="ReleaseNotes.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
     <tr style="height: 40px;">
         <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg" /></a></td>
         <td id="projectalign"><div id="projectname"> EtherNet/IP™ Adapter<span id="projectnumber">3.02.00</span></div></td>
         <td id="projectbrief" align="right"><img src=EtherNetIP.png /></a></td>
         <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
     </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('eip_studio5000_example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Allen-Bradley CompactLogix Controller </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#quickstart_example_plc_studio5000_device_installation">Studio 5000 and Device Description Installation</a><ul><li class="level2"><a href="#page_quickstart_allen_bradely_stud5000_eds">Addding an EDS File</a></li>
</ul>
</li>
<li class="level1"><a href="#page_quickstart_allen_bradely_stud5000_structure">Example Structure</a></li>
<li class="level1"><a href="#page_quickstart_allen_bradely_stud5000_running">Running the Example on PLC</a><ul><li class="level2"><a href="#page_quickstart_allen_bradely_stud5000_download">Download the Example to the PLC</a></li>
<li class="level2"><a href="#page_quickstart_allen_bradely_stud5000_online">Getting Online with The PLC</a></li>
<li class="level2"><a href="#page_quickstart_allen_bradely_stud5000_tags">Monitoring changes through Controller Tags</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>This example is prepared to run on <b>Allen-Bradely CompactLogix 5370 controllers</b> to communticate with <b>EtherNet/IP Adapter</b> for General Purpose of Discrete I/O Device profile running on <b>am243-lp.</b> Explicit and Implicit messaging are implemented in this example.</p>
<h1><a class="anchor" id="quickstart_example_plc_studio5000_device_installation"></a>
Studio 5000 and Device Description Installation</h1>
<p>Allen-Bradely CompactLogix 5370, model 1769-L16ER, controller is programmed using Studio 5000 development environment.</p>
<h2><a class="anchor" id="page_quickstart_allen_bradely_stud5000_eds"></a>
Addding an EDS File</h2>
<p>To add a different EDS file that is not listed in the known EDS files click on "Tools -&gt; EDS Hardwatre Installation Tool". You need to do that if you are using EVM board instead of Launchpad becasue the EDS of Launchpad is already in the structure of this example</p>
<h1><a class="anchor" id="page_quickstart_allen_bradely_stud5000_structure"></a>
Example Structure</h1>
<p>The project is created in Structured Text and divided into three rountines that are run from the main routine and trigerred by a timer every 3 seconds. </p><div class="fragment"><div class="line">TONR(FbdTimer1);</div>
<div class="line">FbdTimer1.PRE := 3000;</div>
<div class="line">FbdTimer1.TimerEnable := NOT FbdTimer1.DN;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> FbdTimer1.DN then</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Get Attribute Single requests per 3 secs</span></div>
<div class="line">    JSR(ExplicitMsg_with_AbPointIO);</div>
<div class="line">    JSR(ImplicitMsg_with_DTK);</div>
<div class="line">    JSR(ExplicitMsg_with_DTK);</div>
<div class="line"> </div>
<div class="line">end_if;</div>
</div><!-- fragment --><p> The subrountines are: </p><ul>
<li>
<b>ExplicitMsg_with_DTK</b> </li>
</ul>
<p>Sends explicit messages for Identity and TCP/IP objects as well as the Discrete Output Point (Class ID = 0x09) Object's first instance. </p><div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">Routine of CIP Explicit Messaging example </span></div>
<div class="line"><span class="comment">for the Allen-Bradley 1743-AENT PointIO</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">case</span> LocalCounter of</div>
<div class="line">    0:  <span class="comment">//Identity Object&#39;s (0x01), Vendor ID attribute (0x01)</span></div>
<div class="line">        CIPGetAttrSingle_DTK_Eip.Class := 16#01;</div>
<div class="line">        CIPGetAttrSingle_DTK_Eip.Attribute := 16#01;</div>
<div class="line">        CIPGetAttrSingle_DTK_Eip.Instance := 16#01;     </div>
<div class="line">    1:  <span class="comment">//Identity Object&#39;s (0x01), Serial number attribute (0x01)      </span></div>
<div class="line">        CIPGetAttrSingle_DTK_Eip.Class := 16#01;</div>
<div class="line">        CIPGetAttrSingle_DTK_Eip.Attribute := 16#06;</div>
<div class="line">        CIPGetAttrSingle_DTK_Eip.Instance := 16#01;</div>
<div class="line">    2:  <span class="comment">//TCP/IP Object&#39;s (0xF5), Configuration Capability attribute (0x02)</span></div>
<div class="line">        CIPGetAttrSingle_DTK_Eip.Class := 16#F5;</div>
<div class="line">        CIPGetAttrSingle_DTK_Eip.Attribute := 16#02;</div>
<div class="line">        CIPGetAttrSingle_DTK_Eip.Instance := 16#01; </div>
<div class="line">    3:  <span class="comment">//DOP Object&#39;s (0x09), Get Attr Single (0x0E)</span></div>
<div class="line">        CIPGetAttrSingle_DTK_Eip.Class := 16#09;</div>
<div class="line">        CIPGetAttrSingle_DTK_Eip.Attribute := 16#03;</div>
<div class="line">        CIPGetAttrSingle_DTK_Eip.Instance := 16#01;         </div>
<div class="line">end_case;</div>
<div class="line">        </div>
<div class="line"><span class="keywordflow">if</span> LocalCounter &lt; 3 then</div>
<div class="line">    LocalCounter := LocalCounter + 1;</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">    LocalCounter := 0;</div>
<div class="line">end_if;</div>
<div class="line"> </div>
<div class="line">MSG(CIPGetAttrSingle_DTK_Eip);</div>
</div><!-- fragment --><ul>
<li>
<b>ImplicitMsg_with_DTK</b> </li>
</ul>
<p>Sends implicit messages to Configuration Assembly to set the mode (ENABLED/DISABLED) of Discrete Output Object I/O communication. This example checks the two bytes of the Configuration Assembly and sets the Output Assemblies represented as two instances of Discrete Output Object. The results can be read on Input Assemblies represented as two instances of Discrete Input Object.</p>
<p>If the first byte of Configuration Assembly is set to "0" Discrete Output Object's first instance will be disabled for the I/O messaging. If it is set to "1" I/O communication for that instance will be enabled and changes on Output Assembly can be seen both on Input Assembly and LED on the board.</p>
<p>Example below shows that Configuration Assemblies set to "1" and enabled for both of the Discrete Output Object's instances. Industrial LEDs (LD 15 &amp; LD 14)controlled by TPIC2810 will be toggled.</p>
<div class="fragment"><div class="line">DTK_Discrete:C.Data[0]:= 16#01;  </div>
<div class="line">DTK_Discrete:C.Data[0]:= 16#01;    </div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> LedStatus then</div>
<div class="line">    DTK_Discrete:O.Data[0]:= 16#00; </div>
<div class="line">    DTK_Discrete:O.Data[1]:= 16#00; </div>
<div class="line">    LedStatus:=0;</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">    DTK_Discrete:O.Data[0]:= 16#01; </div>
<div class="line">    DTK_Discrete:O.Data[1]:= 16#01;   </div>
<div class="line">    LedStatus:=1;</div>
<div class="line">end_if;</div>
</div><!-- fragment --><p><img src="Allen-Bradely-ImplicitMessaging.PNG" alt="" width="600px" height="auto" border="1" class="inline"/></p>
<h1><a class="anchor" id="page_quickstart_allen_bradely_stud5000_running"></a>
Running the Example on PLC</h1>
<h2><a class="anchor" id="page_quickstart_allen_bradely_stud5000_download"></a>
Download the Example to the PLC</h2>
<p>In order to download the example to the PLC, from dropdown menue click "Download". </p>
<p><img src="Allen-Bradely-Download.PNG" alt="" width="600px" height="auto" border="1" class="inline"/></p>
<h2><a class="anchor" id="page_quickstart_allen_bradely_stud5000_online"></a>
Getting Online with The PLC</h2>
<p>After downloading if you are not automatically prompted to move to "Rem Run", from the dropdown menue click "Run Mode". </p>
<p><img src="Allen-Bradely-Run.PNG" alt="" width="600px" height="auto" border="1" class="inline"/></p>
<h2><a class="anchor" id="page_quickstart_allen_bradely_stud5000_tags"></a>
Monitoring changes through Controller Tags</h2>
<p>When online, you can observe these Implicit messages changes from Controller Tags on the left menue bar. In this example we can specifically observe "DTK_Discrete:O.Data[0]" &amp; "DTK_Discrete:O.Data[1]" and "DTK_Discrete:I.Data[0]" &amp; "DTK_Discrete:I.Data[1]" changing. </p>
<p><img src="Allen-Bradely-Tags.PNG" alt="" width="600px" height="auto" border="1" class="inline"/></p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
